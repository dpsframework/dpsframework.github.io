---
layout: post
title: "Paso.2 Cómo comunicar y pasar Hechos entre Agentes-DPS con la version-1.7"
author: "Aguayo-Canela, F.J.<br><small>Department of Electrical and Systems Engineering and Automation (2012-17)<br>School of Industrial Engineering and Information Technology. <b>University of Leon</b> (SPAIN)</small>"
date: 2019-09-04 11:15:56:49 +0100
ref: v17_example02
categories: version-1.7-(eumas)
lang: es
translate: false
---




>  **_Resumen:_** En este documento se detallan los pasos mínimos necesarios para comprobar que dos agentes de tipo Agente-DPS-Node, se comunican correctamente y pueden acceder y modificar la Memoria de Trabajo desde la **Shell-Asíncrona** o desde el **intérprete de comandos JADE-Shell**. Para que estos agentes puedan comunicarse adecuadamente, deben pertenecer a réplicas de una misma aplicación. Por ese motivo es importante, antes de acometer el paso.2, haber realizado el Paso.1 con éxito y contar así, con la estructura base creada para la aplicación **Avalon**.


**Palabras clave:** 

Protocolo de Comunicaciones entre agentes, Shell-Asíncrona, Paso de Hechos entre Agentes.




<hr>{:width="256px" align="center"}
<br>

## Detalle de procesos


**1. Objetivo**: Desplegar dos de los Agentes de la aplicación **Avalon**, ambos conectados a sendos motores de tipo CLIPS y empleando el modo-depuración. Estos dos agentes presentan los nombres: **Analizador200** / **Analizador204** y, pertenecen a la réplica de la aplicación orientada a agentes **Avalon**.


**Proceso**:
1.  Lanzar la plataforma JADE sobre el puerto 4455. (como ejemplo de comprobación)
1.  Lanzar el agente (**Analizador200**) en modo depuración sobre el puerto 4455 en la dirección 127.0.0.1.
1.  Lanzar el segundo agente (**Analizador204**) en modo depuración sobre el puerto 4455 en la dirección 127.0.0.1.


        RESUMEN: Estos son los pasos previos seguidos en la práctica.1:
        ---------------------------------------------------------------


        $ export CLASSPATH=./*:lib/*:
        $ java framework new Avalon
        $ cd Avalon
        $ java generate -n=Analizador200,Analizador204  -t=nodeName
        $ java launcher platform   localhost 4455 &
        $ java launcher stage-node localhost Analizador204 CLIPS  4455 &
        $ java launcher stage-node localhost Analizador200 CLIPS  4455 &



<br>

<hr>{:width="256px" align="center"}
**2. Objetivo**: Establecer el **nivel-de-ejecución** de los Agentes en valor = 5. De esa forma, se activan todas las escuchas y los mensajes pueden ser emitidos y capturados de sus Bandejas de entradas.



**Proceso**:
1.  Activar el nivel de ejecución a 5 en ambos agentes. Ese es, el modo-normal de ejecución.

        $  Hacer  click en botón superior [n-5] del Agente.
        $  O bien, desde consola de JADE-Shell del Agente, ejecutar: **init(5);**



<br>

<hr>{:width="256px" align="center"}
**3. Objetivo**: Cargar Hechos en la memoria de trabajo de un agente, y en la memoria de trabajo del segundo agente de manera remota. Utilizar para ello la **Shell Asíncrona** y el **Selector de Agentes** que pertenecen a la aplicación **Avalon**.


**Proceso**:

1.  Acceder a la Shell Asíncrona del primer Agente. 
1.  Comprobar el estado de la Base de conocimientos. (facts)
1.  Insertar  un nuevo Hecho. (assert ...)
1.  Seleccionar el Agente remoto, donde remitir un Hecho hacia su Memoria de Trabajo.
1.  Insertar  un nuevo Hecho en la Memoria de Trabajo del otro agente. (assert ...)
1.  Comprobar que se han insertado dicho Hecho en la Memoria remota del otro agente.


![TicketBoard](/assets/images/analizador204-asincrona.png){:height="456px" align="center" hspace="10px"  border="0px"}

        Acceder a la Shell Asíncrona en la pestaña de **Analizador204**
        
        (facts)                       Presionar  [Ctrl + Mayus. +  Enter] 
        (assert  (velocidad 0.0))     Presionar  [Ctrl + Mayus. +  Enter]
        (facts)                       Presionar  [Ctrl + Mayus. +  Enter]



        Sin cambiar de agente **Analizador204**, seleccinar el nombre del Agente
        **Analizar200** de la lista de agentes de la aplicación.

        Introducir en la Shell-Asíncrona.


        (assert (aceleracion 3.0))     Presionar  [Ctrl + Mayus. +  Enter]


        Ir hacia la ventana del agente **Analizador200**
        Acceder a la Shell Asíncrona en la pestaña de **Analizador20**
         
        (facts)                       Presionar  [Ctrl + Mayus. +  Enter]
        


![TicketBoard](/assets/images/analizador200-asincrona.png){:height="456px" align="center" hspace="10px"  border="0px"}



<br>

- Con esto se ha comprobado que, los **Hechos**, y de igual forma las **Reglas**, pueden ser transmitidos desde unos Agentes-DPS hacia otros de la misma aplicación. 



<br>
## Utilizando sólo el intérprete JADE-Shell


<hr>{:width="256px" align="center"}
**4. Objetivo**: Cargar Hechos en la memoria de trabajo del propio agente o, en la memoria de trabajo de otro agente. Y utilizar para ello sólo el intérpete JADE-Shell del agente en modo de depuración.


**Proceso**:

1.  Acceder a la JADE-Shell del Agente origen de las solicitudes. 
1.  Construir el mensaje.
1.  Construir el comportamiento e incorporarlo al Agente.
1.  Comprobar resultados en la Memoria de Trabajo del Agente remoto.



- Acceder al **intérprete JADE-Shell** incorporado en el agente en modo-depuración.
- Utilizar por ejemplo, el agente: **Analizador204**

**Construcción del mensaje:**

        
        [psNode]://Analizador204/config/$ > 


         $ >  hecho   = "(assert  (area  5,88789))";
         $ >  msgREPL = myAgent .makeReplMessage( "Analizador200", s );


![TicketBoard](/assets/images/analizador204-jadeShell.png){:height="456px" align="center" hspace="10px"  border="0px"}


        -------------------------------------------------
         DETALLE del contenido del mensaje msgREPL
        -------------------------------------------------
        <(REQUEST
           :sender  ( agent-identifier :name Analizador204@127.0.0.1:4455/JADE  
                      :addresses (sequence http://zorba:7778/acc ))
           :receiver  (set ( agent-identifier :name Analizador200@127.0.0.1:4455/JADE ) )
           :content  "((action (agent-identifier :name Analizador200@127.0.0.1:4455/JADE) 
                         (repl :compiler CLIPS 
                               :content @seeEnvelope_Comments 
                               :language CLIPS 
                               :resultType String 
                               :results waiting... 
                               :sentence KGFzc2VydCAgKGFyZWEgIDUsODg3ODkpKQ==)))" 
           :encoding  fipa.acl.rep.string.std  
           :language  fipa-sl  
           :ontology  Expert-Systems  
           :protocol  fipa-request
           :X-psAction Repl 
           :X-psSender Analizador204 
           :X-psReceiver Analizador200 
        )>

      

- **Construir el comportamiento (Behaviour)** e incorporarlo al Agente.

        [psNode]://Analizador204/config/$ > ...
  
         $ >   b = new N2NREInitiator( myAgent, msgREPL );

         $ >   b .setBehaviourName( "etiqueta" );

         $ >   myAgent .addBehaviour( b );


- **Comprobar resultados en la Memoria de Trabajo** del Agente remoto.

- Desde la pestaña de Shell-Asíncrona del agente **Analizador200**, comprobar que los hechos solicitados han sido insertados en la Memoria de Trabajo del agente (facts).


        (facts)                       Presionar  [Ctrl + Mayus. +  Enter]


![TicketBoard](/assets/images/analizador200-resultado.png){:height="456px" align="center" hspace="10px"  border="0px"}



        Se observa el resultado:
        ---------------------------
        f-0..
        f-1...
        f-3   (area  5,88789)
        ...


- Con esto se ha comprobado de nuevo que, los **Hechos**, y de igual forma las **Reglas**, pueden ser transmitidos desde unos Agentes-DPS hacia las Memorias de Trabajo de otros si ambos agentes pertenece a una misma aplicación. 


  
